<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Three.js Visualizer</title>
    <!-- Modular CSS imports -->
    <link rel="stylesheet" href="/styles/base.css">
    <link rel="stylesheet" href="/styles/panel.css">
    <link rel="stylesheet" href="/styles/panel-simple.css">
    <link rel="stylesheet" href="/styles/controls.css">
    <link rel="stylesheet" href="/styles/inputs.css">
    <link rel="stylesheet" href="/styles/gradients.css">
    <link rel="stylesheet" href="/styles/buttons.css">
    <link rel="stylesheet" href="/styles/modal.css">
    <link rel="stylesheet" href="/styles/grid-menu.css">
    <link rel="stylesheet" href="/styles/outline-panel.css">
    <link rel="stylesheet" href="/styles/scrollbar.css">
    <link rel="stylesheet" href="/styles/color-palettes.css">
  </head>
  <body>
    
    <!-- Simple Main Panel with Toggles -->
    <div class="control-panel" id="controlPanel">
      <div class="panel-header">
        <h2 class="panel-title">🎛️ Effects</h2>
        <button class="close-btn" id="closePanel">×</button>
      </div>

      <div class="panel-body">
        <!-- Drag Effects Section -->
        <div class="effect-category">
          <div class="category-header">
            <h3>🖱️ Drag Effects</h3>
            <button class="cog-btn" data-category="drag" title="Configure Drag Effects">⚙️</button>
          </div>
          
          <div class="effect-toggle">
            <input type="checkbox" id="clickSnakeActive" checked>
            <label for="clickSnakeActive">
              <span class="effect-icon">🐍</span>
              <span class="effect-name">Click Snake</span>
            </label>
          </div>
          
          <div class="effect-toggle">
            <input type="checkbox" id="dragSpiralActive">
            <label for="dragSpiralActive">
              <span class="effect-icon">🌀</span>
              <span class="effect-name">Drag Spiral</span>
            </label>
          </div>
        </div>

        <!-- Idle Effects Section -->
        <div class="effect-category">
          <div class="category-header">
            <h3>✨ Idle Effects</h3>
            <button class="cog-btn" data-category="idle" title="Configure Idle Effects">⚙️</button>
          </div>
          
          <div class="effect-toggle">
            <input type="checkbox" id="randomCubesActive">
            <label for="randomCubesActive">
              <span class="effect-icon">✨</span>
              <span class="effect-name">Random Cubes</span>
            </label>
          </div>
          
          <div class="effect-toggle">
            <input type="checkbox" id="cameraOrbitActive">
            <label for="cameraOrbitActive">
              <span class="effect-icon">🔄</span>
              <span class="effect-name">Camera Orbit</span>
            </label>
          </div>

          <div class="effect-toggle">
            <input type="checkbox" id="simulatedDragActive">
            <label for="simulatedDragActive">
              <span class="effect-icon">🎨</span>
              <span class="effect-name">Simulated Drag</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Panel Footer -->
      <div class="panel-footer">
        <button class="btn btn-danger" id="clearEffects">
          🗑️ Clear All
        </button>
      </div>
    </div>

    <button class="toggle-btn" id="togglePanel">⚙️</button>

    <!-- Settings Modal with Grid Inside -->
    <div class="modal-overlay" id="settingsModal">
      <div class="modal-container" style="max-width: 1200px;">
        <button class="modal-close" id="modalClose">×</button>
        
        <!-- Main Content Area (Grid or Settings) -->
        <div class="modal-main-content">
          <!-- Grid Menu View (Loaded from grid-menu.html) -->
          <div class="modal-view" id="gridView">
            <!-- Content loaded dynamically by modal-manager.js -->
          </div>

          <!-- Settings View (Shown when category clicked) -->
          <div class="modal-view hidden" id="settingsView">
            <div class="settings-header">
              <button class="back-btn" id="backToGrid">← Back</button>
              <h2 class="settings-title" id="settingsTitle">Settings</h2>
            </div>

            <div class="settings-content" id="settingsContent">
              <!-- Content will be dynamically loaded based on category -->
            </div>
          </div>
        </div>

        <!-- IDE-Style Outline (Always visible on right) -->
        <div class="modal-outline">
          <div class="outline-header">
            <div class="outline-title">OUTLINE</div>
          </div>

          <!-- Drag Effects Section -->
          <div class="outline-section">
            <div class="outline-section-title" data-category="drag-effects" style="cursor: pointer;">🖱️ Drag</div>
            <div class="outline-item active" data-category="drag-effects" data-effect="ClickSnake">
              <span class="outline-item-icon">🐍</span>
              <span>Click Snake</span>
              <span class="outline-item-badge">ON</span>
            </div>
          </div>

          <!-- Idle Effects Section -->
          <div class="outline-section">
            <div class="outline-section-title" data-category="idle-effects" style="cursor: pointer;">✨ Idle</div>
            <div class="outline-item" data-category="idle-effects" data-effect="RandomCubes">
              <span class="outline-item-icon">✨</span>
              <span>Random Cubes</span>
            </div>
            <div class="outline-item" data-category="idle-effects" data-effect="CameraOrbit">
              <span class="outline-item-icon">🔄</span>
              <span>Camera Orbit</span>
            </div>
          </div>

          <!-- Global Section -->
          <div class="outline-section">
            <div class="outline-section-title" data-category="global-settings" style="cursor: pointer;">🌍 Global</div>
            <div class="outline-item" data-category="global-settings">
              <span class="outline-item-icon">🎨</span>
              <span>Background</span>
            </div>
            <div class="outline-item" data-category="global-settings">
              <span class="outline-item-icon">⏱️</span>
              <span>Timing</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ✅ All templates now loaded from external files in ui/components/settings/effects/ -->

    <script type="module" src="/main.js"></script>
    <script type="module" src="/ui/ui-controller.js"></script>
  </body>
</html>

